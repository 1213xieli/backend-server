webpackJsonp([11],{DWL7:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("IHPB"),s=a.n(i),c=a("teIl"),n={props:{listData:{type:Array,default:function(){return[]}}}},o={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"main"},e._l(e.listData,function(t,i){return a("div",{key:i,staticClass:"list"},[t?a("div",{staticClass:"jus-b top-spec"},[a("div",[e._v(e._s(t.nameer))]),e._v(" "),a("div",[e._v(e._s(t.price))])]):e._e(),e._v(" "),t?a("div",{staticClass:"jus-b date-param"},[a("div",[e._v(e._s(t.recordDate))]),e._v(" "),a("div",[e._v(e._s(t.spec))])]):e._e()])}),0)])},staticRenderFns:[]};var r=a("C7Lr")(n,o,!1,function(e){a("gpxI")},"data-v-3a39b60f",null).exports,p=a("mFSD"),d=a("W1T5"),l=a("wSez"),h={name:"RecipientsRecords",components:{NoRecord:d.a,myHeader:c.a,list:r},data:function(){return{batchNum:"",batchId:"",nowFeedNum:"",switchBatchNumPopup:!1,batchNumSlots:[{values:[{id:"",name:""}],textAlign:"center"}],switchTypePopup:!1,typeName:"",typeId:"",typeSlots:[{values:[{id:"1",name:"猪只"},{id:"2",name:"饲料"},{id:"3",name:"兽药"},{id:"4",name:"设备"}]}],collarUseList:[],pageNumber:1,pageSize:10,allLoaded:!1,wrapperHeight:0,bottomStatus:""}},created:function(){this._getBatchListList(),this.initData(),l.Indicator.open({text:"加载中...",spinnerType:"fading-circle"})},mounted:function(){this.wrapperHeight=document.documentElement.clientHeight-this.$refs.wrapper.getBoundingClientRect().top},methods:{initData:function(){this.typeId=this.typeSlots[0].values[0].id,this.typeName=this.typeSlots[0].values[0].name},_getBatchListList:function(){var e=this;Object(p.h)().then(function(t){t.data?(e.batchNumSlots[0].values=t.data.map(function(e,t){return{name:e.name,id:e.id}}),e.batchId=e.batchNumSlots[0].values[0].id,e.batchNum=e.batchNumSlots[0].values[0].name,e._queryBatchRecordInfo(e.batchId),e._receivedRecord({type:e.typeId,batchId:e.batchId,pageNumber:e.pageNumber,pageSize:e.pageSize})):l.Indicator.close()})},_queryBatchRecordInfo:function(e){var t=this;Object(p.a)(e).then(function(e){var a=e.data;t.nowFeedNum=a.curcnt})},_receivedRecord:function(e){var t=this;l.Indicator.open({text:"加载中...",spinnerType:"fading-circle"}),Object(p.g)(e).then(function(e){l.Indicator.close(),e.data.details.length?(t.collarUseList=e.data.details.map(function(e){if("1"==t.typeId)return{nameer:e.reason,recordDate:e.time,price:"数量："+e.num,spec:"重量："+e.weight+"kg"};if("2"==t.typeId)return{nameer:e.reason,recordDate:e.time,price:"金额："+e.num,spec:"重量："+e.weight+"kg"};if("3"==t.typeId){var a=e.num-0;return a=a.toFixed(2),{nameer:e.reason,recordDate:e.time,price:"金额："+a,spec:"数量："+e.weight}}return"4"==t.typeId?{nameer:e.reason,recordDate:e.time,price:"金额："+e.num,spec:"数量："+e.weight}:void 0}),t.collarUseList.length<t.pageSize?t.$nextTick(function(){t.allLoaded=!0}):t.$nextTick(function(){t.allLoaded=!1})):t.collarUseList=[]}).catch(function(e){l.Indicator.close()})},selectBatchNum:function(){this.batchNumSlots[0].values[0].name?this.switchBatchNumPopup=!this.switchBatchNumPopup:this.$toast({message:"无可选批次，请核实业务场景！",duration:1e3})},handleBatchConfirm:function(){this.pageNumber=1,this.batchNum=this.$refs.batchPicker.getValues()[0].name,this.batchId=this.$refs.batchPicker.getValues()[0].id,this.batchId&&this._queryBatchRecordInfo(this.batchId),this.typeId&&this.batchId&&this._receivedRecord({type:this.typeId,batchId:this.batchId,pageNumber:this.pageNumber,pageSize:this.pageSize}),this.switchBatchNumPopup=!1},selectType:function(){this.switchTypePopup=!this.switchTypePopup},handleTypeConfirm:function(){this.pageNumber=1,this.typeId=this.$refs.typePicker.getValues()[0].id,this.typeName=this.$refs.typePicker.getValues()[0].name,this.typeId&&this.batchId&&this._receivedRecord({type:this.typeId,batchId:this.batchId,pageNumber:this.pageNumber,pageSize:this.pageSize}),this.switchTypePopup=!1},loadBottom:function(){var e=this;this.pageNumber++,Object(p.g)({type:this.typeId,batchId:this.batchId,pageNumber:this.pageNumber,pageSize:this.pageSize}).then(function(t){var a=[];t.data.details.length&&(a=t.data.details.map(function(t){if("1"==e.typeId)return{nameer:t.reason,recordDate:t.time,price:"数量："+t.num,spec:"重量："+t.weight+"kg"};if("2"==e.typeId)return{nameer:t.reason,recordDate:t.time,price:"金额："+t.num,spec:"重量："+t.weight+"kg"};if("3"==e.typeId){var a=t.num-0;return a=a.toFixed(2),{nameer:t.reason,recordDate:t.time,price:"金额："+a,spec:"数量："+t.weight}}return"4"==e.typeId?{nameer:t.reason,recordDate:t.time,price:"金额："+t.num,spec:"数量："+t.weight}:void 0})),a.length<e.pageSize?e.allLoaded=!0:e.allLoaded=!1,e.collarUseList=[].concat(s()(e.collarUseList),s()(a)),e.$refs.loadmore.onBottomLoaded()},function(t){e.allLoaded=!0})},handleBottomChange:function(e){this.bottomStatus=e}}},u={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticStyle:{"background-color":"#f8f8f8"}},[a("myHeader",{attrs:{isBack:!0,title:e.batchNum+"▼"},on:{"on-handler-title":e.selectBatchNum}}),e._v(" "),a("div",{staticClass:"seat-head"}),e._v(" "),a("div",{staticClass:"flex tab ali-c"},[a("div",{staticClass:"flex1 flexc"},[e._v("在养头数："+e._s(e.nowFeedNum))]),e._v(" "),a("div",{staticClass:"flex1 flexc",on:{click:e.selectType}},[e._v(e._s(e.typeName)+" "),a("span",{staticClass:"ico-down"})])]),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:e.collarUseList.length,expression:"collarUseList.length"}],ref:"wrapper",staticClass:"page-loadmore-wrapper",style:{height:e.wrapperHeight+"px"}},[a("mt-loadmore",{ref:"loadmore",attrs:{"bottom-method":e.loadBottom,"auto-fill":!1,"bottom-all-loaded":e.allLoaded},on:{"bottom-status-change":e.handleBottomChange}},[a("list",{attrs:{listData:e.collarUseList}})],1)],1),e._v(" "),e.collarUseList.length?e._e():a("NoRecord"),e._v(" "),a("div",{staticClass:"my-prop"},[a("mt-popup",{attrs:{position:"bottom"},model:{value:e.switchBatchNumPopup,callback:function(t){e.switchBatchNumPopup=t},expression:"switchBatchNumPopup"}},[a("mt-picker",{ref:"batchPicker",attrs:{slots:e.batchNumSlots,"value-key":"name","show-toolbar":!0}},[a("span",{staticClass:"sure-btn",on:{click:e.handleBatchConfirm}},[e._v("确认")])])],1),e._v(" "),a("mt-popup",{attrs:{position:"bottom"},model:{value:e.switchTypePopup,callback:function(t){e.switchTypePopup=t},expression:"switchTypePopup"}},[a("mt-picker",{ref:"typePicker",attrs:{slots:e.typeSlots,"value-key":"name","show-toolbar":!0}},[a("span",{staticClass:"sure-btn",on:{click:e.handleTypeConfirm}},[e._v("确认")])])],1)],1)],1)},staticRenderFns:[]};var m=a("C7Lr")(h,u,!1,function(e){a("Tszv")},"data-v-e9fa0efe",null);t.default=m.exports},Tszv:function(e,t){},gpxI:function(e,t){}});
//# sourceMappingURL=11.34868fe0e398c0b410b5.js.map
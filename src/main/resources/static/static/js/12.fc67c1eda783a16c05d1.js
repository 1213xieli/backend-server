webpackJsonp([12],{"3V91":function(t,i){t.exports="data:image/png;base64,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"},fEyU:function(t,i,s){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var o=s("3cXf"),e=s.n(o),a=s("4YfN"),r=s.n(a),n=s("X1H5"),c=s.n(n),h=s("teIl"),l=s("+MaT"),u=s("9rMa"),d=s("wSez"),g={name:"takePhotoList",data:function(){return{newPhotoList:[],photoList:[],currentPhotoInfo:{},serverId:[],id:"",maxNum:2,minNum:1,name:"",recordId:"",cameraData:[],isNewFoto:!1,isTakePhoto:!0,popupVisible:!1,imgsrc:""}},components:{myHeader:h.a},created:function(){var t=this;this.id=this.$route.params.id,this.maxNum=this.$route.params.maxNum,this.minNum=this.$route.params.minNum,this.rcordId=this.$route.params.rcordId,this.isNewFoto=this.$route.params.isNewFoto,this.name=this.$route.params.name,this.isTakePhoto=this.$route.params.isTakePhoto,this.photoList=""==this.allPhotoLists.photoList?this.photoList:this.allPhotoLists.photoList,""!=this.photoList&&this.photoList.length>0&&this.photoList.forEach(function(i){i.itemId==t.id&&(t.newPhotoList=i.photoList,i.data&&i.data.length>0&&null!=i.data[0].serverId&&t.serverId.push(i.data[0].serverId))}),"true"==this.isNewFoto||!0===this.isNewFoto?this.cameraData=["camera"]:this.cameraData=["album","camera"],console.log(this.newPhotoList,"dse"),this.initWxConfig()},computed:r()({},Object(u.b)(["signature","allPhotoLists"])),methods:{showImg:function(t){this.popupVisible=!0,this.imgsrc=this.newPhotoList[t].img?this.newPhotoList[t].img:this.newPhotoList[t].src},hideImg:function(){this.popupVisible=!1},getBase64ByLocalId:function(t){var i=this;c.a.getLocalImgData({localId:t.toString(),success:function(t){i.currentPhotoInfo.src=t.localData,i.uploadImg()}})},addPhoto:function(){this.takePhoto()},takePhoto:function(){var t=this;c.a.ready(function(){c.a.chooseImage({count:1,sizeType:["original","compressed"],sourceType:t.cameraData,success:function(i){var s=i.localIds;t.currentPhotoInfo.loadId=s,1===Object(l.a)()?(t.currentPhotoInfo.src=s,t.uploadImg()):2===Object(l.a)()&&t.getBase64ByLocalId(s)}})})},uploadImg:function(){var t=this;c.a.uploadImage({localId:this.currentPhotoInfo.loadId.toString(),isShowProgressTips:1,success:function(i){var s=t.currentPhotoInfo;s.serviceId=i.serverId,t.currentPhotoInfo={},t.newPhotoList.push(r()({isDelete:!0},s)),t.serverId.push(i.serverId),t.$toast({message:"上传成功!",duration:2e3})},fail:function(i){this.$toast("上传失败:"+e()(i)),t.currentPhotoInfo={}}})},deletePhoto:function(t){var i=this;d.MessageBox.confirm("确定执行此操作?").then(function(s){i.newPhotoList.splice(t,1);var o=t-1<0?0:t-1;i.serverId.splice(o,1)})},initWxConfig:function(){c.a.config({debug:!1,appId:this.signature.appId,timestamp:this.signature.timestamp,nonceStr:this.signature.nonceStr,signature:this.signature.signature,jsApiList:["chooseImage","getNetworkType","uploadImage","previewImage"]})},goBack:function(){this.$router.push("/goOutDetail?rcordId="+this.rcordId)},submitData:function(){console.log(this.serverId,"serverId");var t=this.serverId.map(function(t){return{serverId:t,imgType:"jpg"}}),i=[{itemId:this.id,name:this.name,data:t,isNewFoto:this.isNewFoto,photoList:this.newPhotoList,serverId:this.serverId}];console.log(i,"takephoto-set_photoList"),this.$store.commit("SET_PHOTOLIST",i),this.goBack()}}},m={render:function(){var t=this,i=t.$createElement,o=t._self._c||i;return o("div",{staticClass:"container",staticStyle:{"max-width":"100%","box-sizing":"border-box"}},[o("mt-header",{attrs:{title:"拍照记录",fixed:""}},[o("mt-button",{attrs:{slot:"left",icon:"back"},on:{click:t.submitData},slot:"left"},[t._v("返回")])],1),t._v(" "),o("div",{staticClass:"mt4 list-block"},[o("div",{staticClass:"photoList"},[t._l(t.newPhotoList,function(i,s){return o("div",{staticClass:"photo-item"},[i.img?o("img",{staticClass:"imgStyle",attrs:{src:i.img},on:{click:function(i){return t.showImg(s)}}}):o("img",{staticClass:"imgStyle",attrs:{src:i.src},on:{click:function(i){return t.showImg(s)}}}),t._v(" "),i.isDelete?o("div",{staticClass:"delete"},[o("span",{on:{click:function(i){return t.deletePhoto(s)}}},[t._v("x")])]):t._e()])}),t._v(" "),t.isTakePhoto&&this.newPhotoList.length!==Number(this.maxNum)?o("div",{staticClass:"photo-item add",on:{click:t.addPhoto}},[o("img",{attrs:{src:s("3V91"),alt:""}})]):t._e()],2)]),t._v(" "),o("mt-popup",{attrs:{position:"right"},model:{value:t.popupVisible,callback:function(i){t.popupVisible=i},expression:"popupVisible"}},[o("div",{staticClass:"popImg"},[o("img",{attrs:{src:this.imgsrc,alt:""},on:{click:t.hideImg}})])])],1)},staticRenderFns:[]};var p=s("C7Lr")(g,m,!1,function(t){s("n069")},"data-v-3064ac8c",null);i.default=p.exports},n069:function(t,i){}});
//# sourceMappingURL=12.fc67c1eda783a16c05d1.js.map
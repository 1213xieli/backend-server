webpackJsonp([13],{LhR7:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a("IHPB"),s=a.n(i),n=a("teIl"),o={name:"SafeRecordList",data:function(){return{}},props:{listArr:{type:Array,default:function(){return[]}}},mounted:function(){},methods:{splitReason:function(t){return t?t.split("").length>32?t.split("").splice(1,32).join(""):t:"无"},goDetail:function(t){this.$router.push("/goOutDetail?rcordId="+t)}}},r={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"recordList"},t._l(t.listArr,function(e,i){return a("div",{key:i,staticClass:"list-item",on:{click:function(a){return t.goDetail(e.base64RcordId)}}},[a("div",{staticClass:"item-left"},[a("div",{staticClass:"time"},[t._v("洗消日期："+t._s(e.approveTime))]),t._v(" "),a("h3",[t._v("外出原因："+t._s(t.splitReason(e.reason)))])]),t._v(" "),a("div",{staticClass:"item-right"},[1==e.approveStatusIndex&&1==e.billStatusIndex?a("div",{staticClass:"state"},[a("span",{staticClass:"text"},[t._v("返场消毒拍照")])]):t._e(),t._v(" "),a("span",{staticClass:"item-icon"})])])}),0)},staticRenderFns:[]};var c=a("C7Lr")(o,r,!1,function(t){a("kHBE")},"data-v-ef3ee794",null).exports,l=a("y6zN"),d=a("+3Wu"),m=a("wSez"),u=(a("9rMa"),{name:"clearRecord",components:{myHeader:n.a,safeRecordList:c},data:function(){return{startTimeText:Object(l.a)(new Date,"yyyy-MM-dd"),endTimeText:Object(l.a)(new Date,"yyyy-MM-dd"),startTime:Object(l.a)(new Date,"yyyy-MM-dd"),endTime:Object(l.a)(new Date,"yyyy-MM-dd"),beginTime:new Date,popupVisible:!1,listData:[],allLoaded:!1,bottomStatus:"",pageNumber:1,pageSize:10}},created:function(){this.getDataList({pageNumber:1,pageSize:this.pageSize})},beforeRouteEnter:function(t,e,a){a(function(t){"GoOutDetail"===e.name&&(t.$store.commit("CLEAR_PHOTOLIST",[]),sessionStorage.setItem("photoList",[]),t.$store.commit("CLEAR_ALLPHOTOLIST",[]),sessionStorage.setItem("allPhotoLists",[]))})},methods:{loadBottom:function(){var t=this;console.log("下来"),this.pageNumber++,Object(d.d)({pageNumber:this.pageNumber,pageSize:this.pageSize}).then(function(e){var a=e.data;a.length<t.pageSize?t.allLoaded=!0:t.allLoaded=!1,t.listData=[].concat(s()(t.listData),s()(a)),t.$refs.loadmore.onBottomLoaded()},function(e){t.allLoaded=!0})},handleBottomChange:function(t){this.bottomStatus=t},getDataList:function(t){var e=this;m.Indicator.open({text:"加载中...",spinnerType:"fading-circle"}),Object(d.d)(t).then(function(t){m.Indicator.close(),200===t.status&&(e.listData=t.data,e.listData.length<e.pageSize&&(e.allLoaded=!0))}).catch(function(t){m.Indicator.close()})},showSearch:function(){this.popupVisible=!0},hideModal:function(){this.popupVisible=!1},selectStartDate:function(){this.$refs.startTimePicker.open()},selectEndDate:function(){this.$refs.endTimePicker.open()},startTimeConfirm:function(t){this.startTimeText=Object(l.a)(t,"yyyy-MM-dd"),this.beginTime=new Date(t.getTime())},endTimeConfirm:function(t){this.endTimeText=Object(l.a)(t,"yyyy-MM-dd")},search:function(){this.getDataList({pageNumber:1,pageSize:this.pageSize,startDate:this.startTimeText+" 00:00:00",endDate:this.endTimeText+" 23:59:59"}),this.popupVisible=!1}}}),p={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container",staticStyle:{"max-width":"100%","box-sizing":"border-box"}},[a("mt-header",{attrs:{title:"外出及返场洗消记录",fixed:""}},[a("router-link",{attrs:{slot:"left",to:"/addGoOutRecord"},slot:"left"},[a("mt-button",{attrs:{icon:"back"}},[t._v("返回")])],1),t._v(" "),a("mt-button",{attrs:{slot:"right"},on:{click:t.showSearch},slot:"right"},[t._v("查询")])],1),t._v(" "),a("div",{staticClass:"mt4 list-block"},[a("mt-loadmore",{ref:"loadmore",attrs:{"bottom-method":t.loadBottom,"auto-fill":!1,"bottom-all-loaded":t.allLoaded},on:{"bottom-status-change":t.handleBottomChange}},[a("safe-record-list",{attrs:{listArr:t.listData}})],1)],1),t._v(" "),a("mt-popup",{attrs:{position:"top"},model:{value:t.popupVisible,callback:function(e){t.popupVisible=e},expression:"popupVisible"}},[a("div",{staticClass:"popBox"},[a("h3",[t._v("请选择查询日期")]),t._v(" "),a("div",{staticClass:"during-time"},[a("span",{on:{click:t.selectStartDate}},[t._v(t._s(t.startTimeText))]),t._v(" "),a("span",{staticStyle:{color:"#555"}},[t._v("至")]),t._v(" "),a("span",{on:{click:t.selectEndDate}},[t._v(t._s(t.endTimeText))])]),t._v(" "),a("div",{staticClass:"bottom"},[a("span",{staticClass:"cancel",on:{click:t.hideModal}},[t._v("取消")]),t._v(" "),a("span",{staticClass:"search",on:{click:function(e){return t.search()}}},[t._v("查询")])])])]),t._v(" "),a("mt-datetime-picker",{ref:"startTimePicker",attrs:{type:"date"},on:{confirm:t.startTimeConfirm},model:{value:t.startTime,callback:function(e){t.startTime=e},expression:"startTime"}}),t._v(" "),a("mt-datetime-picker",{ref:"endTimePicker",attrs:{type:"date",startDate:t.beginTime},on:{confirm:t.endTimeConfirm},model:{value:t.endTime,callback:function(e){t.endTime=e},expression:"endTime"}})],1)},staticRenderFns:[]};var f=a("C7Lr")(u,p,!1,function(t){a("P6OE")},"data-v-06ace7f4",null);e.default=f.exports},P6OE:function(t,e){},kHBE:function(t,e){}});
//# sourceMappingURL=13.529424fb0467f8989962.js.map
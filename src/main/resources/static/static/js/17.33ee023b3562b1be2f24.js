webpackJsonp([17],{"6CXm":function(t,a){},Q8fd:function(t,a,e){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var s=e("teIl"),c=e("y6zN"),i=e("GE2/"),l=e("pzWD"),n=e("wSez"),u={name:"needBalance",mixins:[e("PnOK").a],data:function(){return{batchNumber:"",batchId:"",switchBatchNumPopup:!1,batchNumSlots:[{values:[{id:"",name:""}],textAlign:"center"}],applyDateText:Object(c.a)(new Date,"yyyy-MM-dd"),applyDate:new Date,balanceData:{avgKg:"",bizdate:"",listdate:"",bthcnt:"",cfsscps:"",cfsszps:"",chl:"",cpjz:"",lrb:"",shjz:"",ssrl:"",zpjz:""}}},components:{SubmitBtn:l.a,myHeader:s.a},created:function(){this._getBatchNumberList()},methods:{_getBatchNumberList:function(){var t=this;n.Indicator.open({text:"加载中...",spinnerType:"fading-circle"}),Object(i.a)().then(function(a){a.data&&a.data.length?(t.batchNumSlots[0].values=a.data.map(function(t,a){return{name:t.name,id:t.id}}),t.batchNumber=t.batchNumSlots[0].values[0].name,t.batchId=t.batchNumSlots[0].values[0].id,t._initInfoByBatchId(t.batchNumSlots[0].values[0].id)):(t.isDisabledSubmit=!0,n.Indicator.close())},function(a){t.isDisabledSubmit=!0,n.Indicator.close()})},_initInfoByBatchId:function(t){var a=this;Object(i.n)(t).then(function(t){n.Indicator.close();var e=t.data;e?a.balanceData={avgKg:e.avgKg,batchName:e.batchName,bizdate:e.bizdate,listdate:e.listdate,bthcnt:e.bthcnt,cfsscps:e.cfsscps,cfsszps:e.cfsszps,chl:e.chl,cpjz:e.cpjz,lrb:e.lrb,shjz:e.shjz,ssrl:e.ssrl,zpjz:e.zpjz}:(a.isDisabledSubmit=!0,a.$toast({message:t.message[0].message,duration:2e3}))}).catch(function(t){a.isDisabledSubmit=!0,n.Indicator.close()})},selectBatchNum:function(){this.batchNumSlots[0].values[0].name?this.switchBatchNumPopup=!this.switchBatchNumPopup:this.$toast({message:"无可结算批次！",duration:2e3})},handleBatchConfirm:function(){this.batchNumber=this.$refs.batchPicker.getValues()[0].name,this.batchId=this.$refs.batchPicker.getValues()[0].id,this.batchId&&this._initInfoByBatchId(this.batchId),this.switchBatchNumPopup=!1},selectApplyDate:function(){this.$refs.applyBalanceDatePicker.open()},applyDateConfirm:function(t){this.applyDateText=Object(c.a)(t,"yyyy-MM-dd")},submitPageData:function(){var t=this;if(!this.isDisabledSubmit){var a={batchName:this.batchNumber,batchId:this.batchId,applyDate:this.applyDateText};this.isDisabledSubmit=!0,this.submitBtnText="提交中...",Object(i.t)(a).then(function(a){t.$toast({message:"提交成功！",duration:1e3}),t.$router.push("/needBalanceRecord"),t.isDisabledSubmit=!1,t.submitBtnText="提交"}).catch(function(a){t.isDisabledSubmit=!1,t.submitBtnText="提交"})}}}},r={render:function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"needBalance",staticStyle:{"max-width":"100%","box-sizing":"border-box"}},[e("myHeader",{attrs:{isBack:!0,backPath:"/finance",title:"我要结算",subtitle:"记录",subtitlePath:"/needBalanceRecord"}}),t._v(" "),e("div",{staticClass:"seat-head"}),t._v(" "),e("div",{staticClass:"list-block"},[e("mt-cell",{attrs:{title:"批次号："},nativeOn:{click:function(a){return t.selectBatchNum(a)}}},[t._v("\n      "+t._s(t.batchNumber)+"\n      "),e("span",{staticClass:"img"})]),t._v(" "),e("mt-cell",{attrs:{title:"申请日期："},nativeOn:{click:function(a){return t.selectApplyDate(a)}}},[e("span",{staticClass:"color-text"},[t._v("\n        "+t._s(t.applyDateText)+"\n      ")]),t._v(" "),e("span",{staticClass:"img"})]),t._v(" "),e("mt-cell",{attrs:{title:"进苗头数：",value:t.balanceData.bthcnt}}),t._v(" "),e("mt-cell",{attrs:{title:"投苗日期：",value:t.balanceData.bizdate}}),t._v(" "),e("mt-cell",{attrs:{title:"清栏日期：",value:t.balanceData.listdate}}),t._v(" "),e("mt-cell",{attrs:{title:"上市正品数：",value:t.balanceData.cfsszps}}),t._v(" "),e("mt-cell",{attrs:{title:"上市均重（kg）：",value:t.balanceData.shjz}}),t._v(" "),e("mt-cell",{attrs:{title:"上市次品数：",value:t.balanceData.cfsscps}}),t._v(" "),e("mt-cell",{attrs:{title:"次品均重：",value:t.balanceData.cpjz}}),t._v(" "),e("mt-cell",{attrs:{title:"成活率（%）：",value:t.balanceData.chl}}),t._v(" "),e("mt-cell",{attrs:{title:"料肉比：",value:t.balanceData.lrb}}),t._v(" "),e("mt-cell",{attrs:{title:"上市日龄：",value:t.balanceData.ssrl}})],1),t._v(" "),e("div",{staticClass:"my-prop"},[e("mt-popup",{attrs:{position:"bottom"},model:{value:t.switchBatchNumPopup,callback:function(a){t.switchBatchNumPopup=a},expression:"switchBatchNumPopup"}},[e("mt-picker",{ref:"batchPicker",attrs:{slots:t.batchNumSlots,"value-key":"name","show-toolbar":!0}},[e("span",{staticClass:"sure-btn",on:{click:t.handleBatchConfirm}},[t._v("确认")])])],1)],1),t._v(" "),e("mt-datetime-picker",{ref:"applyBalanceDatePicker",attrs:{type:"date"},on:{confirm:t.applyDateConfirm},model:{value:t.applyDate,callback:function(a){t.applyDate=a},expression:"applyDate"}}),t._v(" "),e("SubmitBtn",{attrs:{btnText:t.submitBtnText,customStyle:t.myCustomStyle},nativeOn:{click:function(a){return t.submitPageData(a)}}})],1)},staticRenderFns:[]};var b=e("C7Lr")(u,r,!1,function(t){e("6CXm")},null,null);a.default=b.exports}});
//# sourceMappingURL=17.33ee023b3562b1be2f24.js.map
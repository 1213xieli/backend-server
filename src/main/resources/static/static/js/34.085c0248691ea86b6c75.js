webpackJsonp([34],{"84rN":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a("4YfN"),s=a.n(i),n=a("teIl"),c=a("pzWD"),l=a("UNpN"),o=(a("TIfe"),a("wSez")),u=a("y6zN"),r=a("w3CS"),d=a("9rMa"),v={name:"CastSeedsApply",components:{myHeader:n.a,SubmitBtn:c.a},data:function(){return{castData:{applyDate:Object(u.a)(new Date,"yyyy-MM-dd"),num:""},size:"",name:"",selectDate:new Date,isActive:!1,options:[{title:"是否准备加药桶",value:!1},{title:"上猪台是否准备",value:!1},{title:"消毒工作是否准备",value:!1},{title:"加温/降温设施是否达到标准",value:!1},{title:"圆盘料槽是否准备（50头/个）",value:!1},{title:"发电机是否正常使用（15KW以上）",value:!1},{title:"保温灯是否准备（每栏1个，护理 栏2个）",value:!1},{title:"保温箱、屋中屋是否准备（底板实木板侧板压缩版，每头猪面积不少于0.1平方）",value:!1},{title:"物资准备（每100头猪：米糠100斤、生石灰100斤、米25斤、奶粉2斤、生姜10斤、红糖10斤）",value:!1}]}},created:function(){this.selectDate=Object(u.e)().slice(0,10),this._getInitData(),this.name=this.userInfo.name},watch:{options:{handler:function(t,e){this.isActive=t.every(function(t){return!0===t.value})},immediate:!0,deep:!0}},computed:s()({},Object(d.b)(["userInfo"])),mounted:function(){},methods:{changeApplyNumber:function(t){this.castData.num=Object(r.a)(t)},submitPageData:function(){var t=this,e={barrelReadied:this.options[0].value,pigTableReadied:this.options[1].value,disinfectFinished:this.options[2].value,temperatureControlReadied:this.options[3].value,troughReadied:this.options[4].value,electricGeneratorReadied:this.options[5].value,heatLampReadied:this.options[6].value,incubatorReadied:this.options[7].value,materialsReadied:this.options[8].value},a=s()({castName:this.name,scope:this.size},this.castData,e);return this.castData.num?this.isActive?void(this.isDisabledSubmit||(this.isDisabledSubmit=!0,this.submitBtnText="提交中...",Object(l.r)(a).then(function(e){Object(o.Toast)({message:"提交成功！",duration:1e3}),t.options.forEach(function(t){t.value=!1}),t.$router.push("/castSeedsRecord")}).catch(function(e){t.isDisabledSubmit=!1,t.submitBtnText="提交",Object(o.Toast)({message:e,duration:1e3})}))):(Object(o.Toast)({message:"请确认投苗申请条件！",duration:1e3}),!1):(this.$toast("请输入投苗数量！"),!1)},selectApplyDate:function(){this.$refs.deadPicker.open()},applyDateConfirm:function(t){this.castData.applyDate=Object(u.a)(this.selectDate,"yyyy-MM-dd")},_getInitData:function(){this.size=JSON.parse(sessionStorage.getItem("userInfo")).size}}},p={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticStyle:{"max-width":"100%","box-sizing":"border-box"}},[a("myHeader",{attrs:{isBack:!0,backPath:"/business",title:"投苗申请",subtitle:"记录",subtitlePath:"/castSeedsRecord"}}),t._v(" "),a("div",{staticClass:"mt4",staticStyle:{padding:".12rem 0",background:"#f8f8f8"}},[a("mt-cell",{attrs:{title:"养户：",value:t.name}}),t._v(" "),a("mt-cell",{attrs:{title:"饲养规模：",value:t.size+" 头"}}),t._v(" "),a("mt-field",{staticClass:"zb-field",attrs:{label:"申请投苗日期：",placeholder:"请选择投苗日期"},nativeOn:{click:function(e){return t.selectApplyDate(e)}},model:{value:t.castData.applyDate,callback:function(e){t.$set(t.castData,"applyDate",e)},expression:"castData.applyDate"}}),t._v(" "),a("mt-field",{staticClass:"zb-field",attrs:{label:"申请投苗数量：",placeholder:"请输入投苗数量"},nativeOn:{input:function(e){return t.changeApplyNumber(e)}},model:{value:t.castData.num,callback:function(e){t.$set(t.castData,"num",e)},expression:"castData.num"}})],1),t._v(" "),t._l(t.options,function(e,i){return a("div",[a("mt-cell",{staticClass:"item-checkbox-body",attrs:{title:e.title}},[a("span",{staticClass:"zb-checkbox"},[a("span",[a("input",{directives:[{name:"model",rawName:"v-model",value:e.value,expression:"option.value"}],staticClass:"checkboxItem",attrs:{type:"checkbox",id:"check"+i},domProps:{value:e.value||e,checked:Array.isArray(e.value)?t._i(e.value,e.value||e)>-1:e.value},on:{change:function(a){var i=e.value,s=a.target,n=!!s.checked;if(Array.isArray(i)){var c=e.value||e,l=t._i(i,c);s.checked?l<0&&t.$set(e,"value",i.concat([c])):l>-1&&t.$set(e,"value",i.slice(0,l).concat(i.slice(l+1)))}else t.$set(e,"value",n)}}}),t._v(" "),a("label",{attrs:{for:"check"+i}})])])])],1)}),t._v(" "),a("div",{staticClass:"submit-bth",class:{active:t.isActive},attrs:{btnText:t.submitBtnText,customStyle:t.myCustomStyle},on:{click:function(e){return t.submitPageData()}}},[t._v("提交")]),t._v(" "),a("mt-datetime-picker",{ref:"deadPicker",attrs:{type:"date"},on:{confirm:t.applyDateConfirm},model:{value:t.selectDate,callback:function(e){t.selectDate=e},expression:"selectDate"}})],2)},staticRenderFns:[]};var m=a("C7Lr")(v,p,!1,function(t){a("fOL2")},"data-v-5c1da87e",null);e.default=m.exports},fOL2:function(t,e){}});
//# sourceMappingURL=34.085c0248691ea86b6c75.js.map